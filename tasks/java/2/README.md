# HTTP Server
## Сервер

- **HTTP методы**: поддерживаются GET, POST, PUT, PATCH, DELETE.
- **Разбор запроса**: обработка строки запроса, заголовков (доступных в виде `Map`) и тела запроса.
- **Формирование ответа**: возможность задавать статус ответа, статусную фразу, заголовки и тело.
- **Настраиваемый сервер**: создаётся сервер на указанном хосте и порту.
- **Регистрация обработчиков**: API позволяет добавлять обработчики (через интерфейс `HttpHandler`) для отдельных URL-путей и HTTP-методов.
- **Многопоточность**: сервер использует `ExecutorService` с возможностью выбора между обычными потоками и виртуальными потоками (при поддержке Java 19+).

## Структура 

- **org.httpServerAyzek.http.handler.HttpHandler**  
  Интерфейс для реализации пользовательских обработчиков HTTP-запросов.  
  Каждый обработчик получает разобранный запрос (`HttpReqParser`) и объект ответа (`HttpRes`).

- **org.httpServerAyzek.http.util.HttpReqParser**  
  Класс для парсинга входящего HTTP-запроса. Извлекает метод, путь, версию протокола, заголовки и тело запроса.

- **org.httpServerAyzek.http.HttpRes**  
  Класс для формирования и отправки HTTP-ответа клиенту. Позволяет задавать код статуса, статусную фразу, заголовки и тело, а также автоматически вычисляет `Content-Length` при необходимости.

- **org.httpServerAyzek.http.HttpServer**  
  Основной класс сервера, который использует `ServerSocketChannel` для прослушивания соединений. Обрабатывает входящие подключения, парсит запросы и передаёт их зарегистрированным обработчикам.

- **org.httpServerAyzek.RunServer**  
  Точка входа в приложение. Демонстрирует создание экземпляра сервера, регистрацию обработчиков для различных HTTP-методов и запуск сервера.

## Принцип работы сервера

1. **Инициализация и настройка**  
   При создании сервера задаются хост, порт, количество потоков и тип используемого `ExecutorService` (обычные или виртуальные потоки). Через публичный API регистрация обработчиков производится методом `addListener(path, method, handler)`.

2. **Обработка входящих соединений**  
   Сервер использует неблокирующий режим `ServerSocketChannel` для приёма новых соединений. При установке соединения переключает его в блокирующий режим, а далее передает обработку в пул потоков.

3. **Парсинг запроса**  
   В методе `handleClient` входящий запрос разбирается с использованием класса `HttpReqParser`, который извлекает HTTP-метод, URL-путь, заголовки и тело запроса.

4. **Вызов обработчика**  
   В зависимости от HTTP-метода и URL-пути сервер ищет зарегистрированный обработчик. Если обработчик найден, он вызывается для формирования ответа. В противном случае возвращается ответ с кодом 404.

5. **Формирование и отправка ответа**  
   Класс `HttpRes` используется для задания статуса, заголовков и тела ответа. Перед отправкой автоматически добавляется заголовок `Content-Length` (если требуется), после чего готовый ответ отправляется клиенту.
